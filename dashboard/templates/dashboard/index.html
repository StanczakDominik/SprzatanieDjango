{% load static %}

<link rel="stylesheet" href="{% static 'dashboard/style.css' %}">
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">

{% if user.is_authenticated %}
<p>
    Hi, {{ user.username }}!
</p>

{% if activities %}

<div>
    <form>
        <label for="priority">Priority cut-off:</label>
        <input id="priority" min="0" max="1" step="0.05" value = "1.0" name="priority">
        <input id="filter-btn" type="submit" value="Filter">
    </form>
</div>

    <table>
    <tr>
        <th>Co?</th>
        <th>Okres</th>
        <th>Ostatnio</th>
        <th>Ile wpis√≥w</th>
        <th>Priorytet</th>
    </tr>
    {% for activity in activities %}
    <tr>
        <td id="activity_name">
            <a href="{% url 'dashboard:detail' activity.id %}">{{ activity.activity_name }}</a>
        </td>
        <td id="expected_period">
            {{ activity.expected_period.days }}d
        </td>
        <td id="last_execution_date"> {{ activity.last_entry.execution_date | date:"Y-m-d" }} </td>
        <td id="execution_count"> {{ activity.execution_set.count }} </td>
        <td id="priority"> {{ activity.priority | floatformat:-1 }} </td>
    </tr>
    {% endfor %}
    </table>
{% else %}
    <p>No activities defined.</p>
{% endif %}

<p><a href="{% url 'dashboard:create_activity' %}">Create an activity?</a>

{%endif %}
